<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>bluebirdBowerTest520</title>
</head>
<body>
	<div>块状元素</div>
</body>
<script src='otherscript/bluebird.js' type='text/javascript'></script>
<script type="text/javascript">
/**
 * 测试bluebird在浏览器中的应用。
 * 这儿只测试了new Promise（）方法。其他如  .all 方法，看官方文档。
 */

//console.log(Promise);
// var Bluebird = Promise.noConflict();
// console.log(Bluebird);
var cc=console.log.bind(console);

function ajaxGetAsync(url) {
    return new Promise(function (resolve, reject) {
        var xhr = new XMLHttpRequest;
        xhr.addEventListener("error", reject); 
        xhr.addEventListener("readystatechange", function(){
        	if(xhr.readyState==4){
        		if((xhr.status>=200&&xhr.status<300)||xhr.status==304){
        			console.log('连接');
        			console.log(xhr.responseText);
        			resolve(xhr.responseText);
        		}
        	}
        });
        xhr.open("GET", url);
        xhr.send(null);
    });
}

/*function ajaxGetAsync(url) {
    return new Promise(function (resolve, reject) {
        var xhr = new XMLHttpRequest;
        xhr.addEventListener("load", reject);
        xhr.addEventListener("error", resolve);
        xhr.open("GET", url);
        xhr.send(null);  
    });
}*/
var log=console.log.bind(console);
ajaxGetAsync('txt1.php').then(cc,function(){console.log('2')});
</script>
</script>
</html> 